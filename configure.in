dnl Process this file with autoconf to produce a configure script.
AC_INIT(sources/game/efg.h)
AM_INIT_AUTOMAKE(gambit, 0.97.1.0)
dnl AM_CONFIG_HEADER(config.h)

dnl User-specified options
AC_ARG_WITH(gmp,
[  --with-gmp                Use GNU mp for multiple-precision math ],
  AC_DEFINE(USE_GNU_MP, 1)
  GMP_LIBS="-lgmp")
AC_SUBST(GMP_LIBS)

dnl Checks for programs.
AC_PROG_CC
AC_PROG_CXX
AC_PROG_RANLIB

dnl The following checks are currently commented out.
dnl These were generated during the original autoconfiscation of gambit,
dnl but as we don't really do anything if these tests fail, there's
dnl not much point in having them yet.

dnl Checks for header files.
dnl AC_HEADER_STDC
dnl AC_CHECK_HEADERS(fcntl.h limits.h malloc.h sys/time.h unistd.h)

dnl Checks for typedefs, structures, and compiler characteristics.
dnl AC_C_CONST
dnl AC_C_INLINE
dnl AC_TYPE_PID_T
dnl AC_TYPE_SIZE_T
dnl AC_STRUCT_TM

dnl Checks for library functions.
dnl AC_FUNC_MEMCMP
dnl AC_TYPE_SIGNAL
dnl AC_CHECK_FUNCS(ftime putenv strdup strstr strtod strtol)

CXXFLAGS="$CXXFLAGS -Wall"

dnl------------------------
dnl Checking for wxWindows
dnl------------------------

dnl check for wx-config
WX_PATH_WXCONFIG(2.4.0, WXCONFIG=1)
if test "$WXCONFIG" != 1; then
    AC_MSG_ERROR([
            Please check that wx-config is in path, the directory
            where wxWindows libraries are installed (returned by
            'wx-config --libs' command) is in LD_LIBRARY_PATH or
            equivalent variable and wxWindows is version 2.4.0 or above.
    ])
fi

dnl clean up wxWindows-related flags
WX_CXXFLAGS=`echo $WX_CXXFLAGS | sed 's/-fno-exceptions//g'`
dnl Newer versions of gcc issue a warning if /usr/local/include listed
dnl in search path
WX_CXXFLAGS=`echo $WX_CXXFLAGS | sed 's/-I\/usr\/local\/include//g'`
AC_SUBST(WX_CXXFLAGS)

LDFLAGS="${LDFLAGS} ${WX_LIBS} ${GMP_LIBS}"

GUI_LIBS="${WX_LIBS}"
AC_SUBST(GUI_LIBS)

AC_OUTPUT(Makefile sources/Makefile \
          sources/base/Makefile \
          sources/math/Makefile \
          sources/numerical/Makefile \
          sources/game/Makefile \
	  sources/pelican/Makefile \
	  sources/poly/Makefile \
	  sources/nash/Makefile \
	  sources/python/Makefile \
	  sources/bitmaps/Makefile \
          sources/gui/Makefile \
          efg/Makefile nfg/Makefile \
	  scripts/Makefile scripts/python/Makefile)


