dnl Process this file with autoconf to produce a configure script.
AC_INIT(sources/game/efg.h)
AM_INIT_AUTOMAKE(gambit, 0.97.0.1)
dnl AM_CONFIG_HEADER(config.h)

dnl Checks for programs.
AC_PROG_CC
AC_PROG_CXX
AC_PROG_RANLIB
AC_PROG_YACC

dnl A number of the following checks are currently commented out.
dnl These are checks for functions and headers we do actually use,
dnl but for which we don't have any workarounds should they be missing.

dnl Checks for header files.
AC_HEADER_STDC
dnl AC_CHECK_HEADERS(fcntl.h limits.h malloc.h sys/time.h unistd.h)

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_C_INLINE
AC_TYPE_PID_T
AC_TYPE_SIZE_T
AC_STRUCT_TM

dnl Checks for library functions.
AC_FUNC_MEMCMP
AC_TYPE_SIGNAL
dnl AC_CHECK_FUNCS(ftime putenv strdup strstr strtod strtol)

dnl------------------------
dnl Checking for wxWindows
dnl------------------------

dnl check for wx-config
WX_PATH_WXCONFIG(2.3.2, WXCONFIG=1)
if test "$WXCONFIG" != 1; then
    AC_MSG_ERROR([
            Please check that wx-config is in path, the directory
            where wxWindows libraries are installed (returned by
            'wx-config --libs' command) is in LD_LIBRARY_PATH or
            equivalent variable and wxWindows is version 2.3.2 or above.
    ])
fi

CXXFLAGS="-DNEWSTYLE_TEMPLATES ${CXXFLAGS} ${WX_CXXFLAGS}"
CXXFLAGS=`echo $CXXFLAGS | sed 's/-fno-exceptions//g'`
LDFLAGS="${LDFLAGS} ${WX_LIBS}"

GUI_LIBS="${WX_LIBS}"
AC_SUBST(GUI_LIBS)

AC_OUTPUT(Makefile sources/Makefile \
          sources/base/Makefile \
          sources/math/Makefile \
          sources/numerical/Makefile \
          sources/game/Makefile \
	  sources/pelican/Makefile \
	  sources/poly/Makefile \
	  sources/nash/Makefile \
	  sources/gcl/Makefile \
          sources/guishare/Makefile \
	  sources/wxgcl/Makefile \
          sources/gui/Makefile)

